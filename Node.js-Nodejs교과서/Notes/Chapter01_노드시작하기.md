# Chapter 01. 노드 시작하기

## 자바스크립트 런타임
- 노드는 자바스크립트 런타임.
  - 런타임은 특정 언어로 만든 프로그램들을 실행할 수 있는 환경을 말함.
  - 노드는 자바스크립트로 코딩한 프로그램을 컴퓨터에서 실행할 수 있게 해준다.

## 이벤트 기반
- event-driven이란 이벤트가 발생할 때 미리 지정해둔 작업을 수횅하는 방식
- 이벤트 기반 시스템에서는 특정 이벤트가 발생할 때 무엇을 할지 미리 등록
  - event listener에 callback 함수를 등록한다고 표현.
- 노드는 이벤트 기반 방식으로 동작
  - 이벤트가 발생하면 이벤트 리스너에 등록해둔 콜백함수가 호출된다.

- 이벤트 루프(Event Loop)
  - 여러 이벤트가 동시에 발생했을 때 어떤 순서로 콜백 함수를 호출할 것인지를 이벤트 루프가 판단
  - Task Queue : 이벤트 발생 후 호출되어야 할 콜백 함수들이 기다리는 공간
    - 콜백들이 이벤트 루프가 정한 순서대로 줄을 서 있으므로 콜백 큐라고도 부른다.
  

## Non-blocking I/O
### Non-blocking이란 이전 작업이 완료될 떄까지 멈추지 않고 다음 작업을 수행함.
- 싱글 스레드라는 한계 때문에 자바스크립트의 모든 코드가 이 방식으로 시간적 이득은 볼 수 없다.
- Non-blocking code
```javascript
function longRunningJob(){
    console.log("오래 걸리는 작업 끝");
}

console.log("메인 시작");
setTimeout(longRunningJob, 0);
console.log("다음 작업 시작");
```
  - 결과 
  ```
    메인 시작
    다음 작업 시작
    오래 걸리는 작업 끝
  ```
  - setTimeout(콜백, 0)은 코드를 non-blocking으로 만들기 위해 사용하는 기법 중 하나.
  - setTimeout()의 콜백 함수가 태스크 큐로 보내지므로 순서대로 실행되지 않음.

  ## Single Thread
  ### 노드는 싱글 스레드이므로 주어진 작업을 혼자서 처리
  - 한 번에 한 가지 일만 처리하므로 어떤 작업에서 블로킹이 발생하면 다음 일을 처리하지 못함.
  - 노드 프로세스는 내부적으로는 스레드를 여러 개 가지고 있음.
    - 직접 제이할 수 있는 스레드는 하나뿐이므로 싱글 스레드라고 부르는 것이다.
  - 노드는 스레드를 늘리는 대신, 프로세스 자체를 복사해 여러 작업을 동시에 처리하는 멀티 프로세싱 방식을 택함.
    - 자바스크립트 언어 자체가 싱글 스레드 특성을 띠고 있기 때문에
      (인터프리터 언어라서..?)

# Node Server
## 싱글 스레드라서 멀티 스레드보다는 컴퓨터 자구언을 적게 사용하는 장점, 하지만 CPU 코어를 하나만 사용한다는 단점!
- Q) CPU Utilization이 많이 필요한 서버는 노드로 구동시키는 것은 좋지 않은 선택?

## 싱글 스레드라서 하나뿐이 스레드가 에러로 인해 멈추지 않도록 조심
- 에러 처리를 하지 못하면 서버가 다운될 수 있음.
- 네트워크나 DB, 디스크 작업 같은 I/O에 특화
  - 실시간 채팅, 주식 차트, JSON 데이터를 제공하는 API 서버가 노드를 많이 사용
- 이미지나 비디오 처리, 대규모 데이터 처리 같이 CPU가 많이 사용하는 작업을 위한 서버로는 비추
  - AWS Lambda나 GCF같은 서비스에서 노드로 CPU를 많이 사용하는 작업을 처리하는 것을 지원

# 서버 이외의 노드
## 노드 기반으로 돌아가는 웹 프레임워크
- Angular, React, Vue, Meteor 등